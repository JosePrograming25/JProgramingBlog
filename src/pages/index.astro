---
import Layout from "../layouts/Layout.astro";
import PostCard from "../components/PostCard.astro";
// import "../styles/inicio.css"; // Removed to favor Tailwind

// Obtener todos los posts
const allPosts = await Astro.glob("./Blog/*.md");

// Ordenar por fecha (mÃ¡s reciente primero)
const sortedPosts = allPosts.sort((a, b) => {
  return (
    new Date(b.frontmatter.date).valueOf() -
    new Date(a.frontmatter.date).valueOf()
  );
});

// Separar Entradas de Blog y Proyectos
const blogPosts = sortedPosts
  .filter((post) => post.frontmatter.type === "blog")
  .slice(0, 3);
const projects = sortedPosts
  .filter((post) => post.frontmatter.type === "project")
  .slice(0, 3);

// Datos simulados para comentarios (hasta que haya backend)
const testimonials = [
  {
    name: "MarÃ­a LÃ³pez",
    text: "Los artÃ­culos son claros y muy prÃ¡cticos. Me ayudaron a resolver un issue en mi proyecto.",
    role: "Frontend Dev",
  },
  {
    name: "Carlos Ruiz",
    text: "Buen enfoque para documentar problemas reales. Â¡Sigue asÃ­!",
    role: "Fullstack Dev",
  },
];
---

<Layout>
  <!-- Main Grid Container -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-24">
    <!-- SecciÃ³n 1: Hero -->
    <section id="hero" class="text-center space-y-8 py-16 animate-fade-in">
      <div class="space-y-4 max-w-3xl mx-auto">
        <h1
          class="text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400"
        >
          Hola, soy JosÃ© GarcÃ­a ğŸ‘‹
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 leading-relaxed">
          Bienvenido a <span
            class="font-semibold text-blue-600 dark:text-blue-400"
            >JPrograming25</span
          >. AquÃ­ documento mi viaje en el desarrollo: proyectos reales,
          soluciones a bugs y todo lo que aprendo dÃ­a a dÃ­a.
        </p>
      </div>

      <div class="flex flex-wrap justify-center gap-4">
        <a
          href="/about"
          class="px-8 py-3 rounded-full bg-blue-600 hover:bg-blue-700 text-white font-medium transition-all shadow-lg hover:shadow-blue-500/25"
        >
          ConÃ³ceme
        </a>
        <a
          href="#contacto"
          class="px-8 py-3 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 transition-all font-medium"
        >
          Contactar
        </a>
      </div>
    </section>

    <!-- SecciÃ³n 2: Nuevas Entradas -->
    <section id="entradas" class="space-y-8">
      <div
        class="flex items-center justify-between border-b border-gray-200 dark:border-gray-800 pb-4"
      >
        <h2
          class="text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2"
        >
          ğŸ“ Nuevas Entradas
        </h2>
        <a
          href="/Blog"
          class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium flex items-center gap-1"
        >
          Ver todas <span>â†’</span>
        </a>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {
          blogPosts.map((post) => (
            <PostCard
              title={post.frontmatter.title || "Sin tÃ­tulo"}
              description={post.frontmatter.description || ""}
              url={post.url}
              date={post.frontmatter.date || new Date().toISOString()}
              image={post.frontmatter.image}
              type={post.frontmatter.type || "blog"}
            />
          ))
        }
      </div>
    </section>

    <!-- SecciÃ³n 3: Tags Destacados -->
    <section
      class="bg-gray-50 dark:bg-slate-800/50 rounded-2xl p-8 border border-gray-100 dark:border-gray-700"
    >
      <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">
        ğŸ”¥ Tags Populares
      </h2>
      <div class="flex flex-wrap gap-3">
        {
          ["Javascript", "Linux", "Atajos", "Astro", "Productividad"].map(
            (tag) => (
              <a
                href={`/tags/${tag.toLowerCase()}`}
                class="px-4 py-2 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 transition-all text-sm font-medium"
              >
                #{tag}
              </a>
            ),
          )
        }
      </div>
    </section>

    <!-- SecciÃ³n 4: Proyectos Destacados -->
    <section id="proyectos" class="space-y-8">
      <div class="border-b border-gray-200 dark:border-gray-800 pb-4">
        <h2
          class="text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2"
        >
          ğŸš€ Proyectos Destacados
        </h2>
      </div>

      {
        projects.length > 0 ? (
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {projects.map((project) => (
              <PostCard
                title={project.frontmatter.title || "Proyecto sin tÃ­tulo"}
                description={project.frontmatter.description || ""}
                url={project.url}
                date={project.frontmatter.date || new Date().toISOString()}
                image={project.frontmatter.image}
                type={project.frontmatter.type || "project"}
              />
            ))}
          </div>
        ) : (
          <div class="text-center py-16 bg-gray-50 dark:bg-slate-900/50 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700">
            <div class="text-5xl mb-4">ğŸ”¨</div>
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
              Trabajando en algo increÃ­ble
            </h3>
            <p class="text-gray-500 dark:text-gray-400 max-w-md mx-auto">
              Pronto subirÃ© mis primeros proyectos destacados aquÃ­. Â¡Mantente
              atento o revisa mi GitHub mientras tanto!
            </p>
          </div>
        )
      }
    </section>

    <!-- SecciÃ³n 5: Comentarios -->
    <section class="space-y-8">
      <h2 class="text-3xl font-bold text-center text-gray-900 dark:text-white">
        ğŸ’¬ Lo que dicen
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {
          testimonials.map((t) => (
            <div class="p-6 rounded-xl bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow">
              <p class="text-gray-600 dark:text-gray-300 italic mb-4">
                "{t.text}"
              </p>
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-sm">
                  {t.name.charAt(0)}
                </div>
                <div>
                  <h4 class="font-semibold text-gray-900 dark:text-white">
                    {t.name}
                  </h4>
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    {t.role}
                  </p>
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </section>

    <!-- SecciÃ³n 6: Feedback -->
    <section
      class="max-w-2xl mx-auto w-full bg-blue-50 dark:bg-blue-900/10 rounded-2xl p-8 text-center border border-blue-100 dark:border-blue-800/30"
    >
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-3">
        Â¿Tienes alguna sugerencia?
      </h2>
      <p class="text-gray-600 dark:text-gray-300 mb-6">
        Me ayuda mucho saber quÃ© temas te interesan mÃ¡s.
      </p>
      <a
        href="mailto:joseprograming25@gmail.com"
        class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors"
      >
        Enviar Feedback
      </a>
    </section>
  </main>
</Layout>

<style>
  /* Animaciones personalizadas si se requieren */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in {
    animation: fade-in 0.8s ease-out forwards;
  }
</style>
